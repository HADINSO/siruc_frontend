<div class="administracion-usuarios-container">
  <!-- Notificación -->
  <div 
    *ngIf="mostrarNotificacion" 
    class="notification"
    [ngClass]="'notification-' + tipoMensaje"
  >
    <div class="notification-content">
      <span>{{ mensaje }}</span>
      <button class="notification-close" (click)="cerrarNotificacion()">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
  </div>

  <!-- Header -->
  <div class="page-header">
    <div class="header-content">
      <h1>Administracion de Usuarios</h1>
      <p>Gestion de usuarios, roles y permisos del sistema</p>
    </div>
    <button class="btn-nuevo-usuario" (click)="abrirModalCrear()">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
      </svg>
      Nuevo Usuario
    </button>
  </div>

  <!-- Estadísticas -->
  <div class="estadisticas-grid">
    <app-stat-card 
      *ngFor="let card of estadisticasCards"
      [data]="card"
    ></app-stat-card>
  </div>

  <!-- Grid de Usuarios -->
  <div class="usuarios-section">
    <!-- Cargando -->
    <div *ngIf="cargandoUsuarios" class="loading-container">
      <div class="spinner"></div>
      <p>Cargando usuarios...</p>
    </div>

    <!-- Sin usuarios -->
    <div *ngIf="!cargandoUsuarios && usuarios.length === 0" class="empty-state">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
      </svg>
      <h3>No hay usuarios</h3>
      <p>Crea el primer usuario haciendo clic en "Nuevo Usuario"</p>
      <button class="btn-crear-primero" (click)="abrirModalCrear()">
        Crear Primer Usuario
      </button>
    </div>

    <!-- Grid de usuarios -->
    <div *ngIf="!cargandoUsuarios && usuarios.length > 0" class="usuarios-grid">
      <app-user-card 
        *ngFor="let usuario of usuarios"
        [usuario]="usuario"
        (editar)="abrirModalEditar($event)"
        (eliminar)="abrirDeleteConfirmation($event)"
      ></app-user-card>
    </div>
  </div>

  <!-- Modal Crear/Editar Usuario -->
  <app-user-modal
    [mostrar]="mostrarModal"
    [usuarioEditar]="usuarioEnEdicion"
    [roles]="roles"
    [permisos]="permisos"
    [elementos]="elementos"
    (guardar)="onGuardarUsuario($event)"
    (cancelar)="onCancelarModal()"
  ></app-user-modal>

<<<<<<< HEAD
  <!-- Modal Confirmar Eliminación -->
  <app-delete-confirmation
    [mostrar]="mostrarDeleteConfirmation"
    [nombreUsuario]="usuarioAEliminar?.nombre || ''"
    [cargando]="cargandoOperacion"
    (confirmar)="onConfirmarEliminar()"
    (cancelar)="onCancelarDelete()"
  ></app-delete-confirmation>
=======
          <!-- User Info -->
          <div class="flex-1 min-w-0">
            <h3 class="font-semibold text-[#1B4332] text-lg">María García Pérez</h3>
            <p class="text-slate-600 text-sm truncate">maria.garcia@universidad.edu</p>

            <!-- Role and Department -->
            <div class="flex items-center gap-2 mt-2 flex-wrap">
              <span
                class="inline-flex items-center gap-1 px-3 py-1 bg-[#1B4332] text-white text-xs rounded-full font-medium">
                <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                  <path
                    d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z">
                  </path>
                </svg>
                Administrador
              </span>
              <span class="text-slate-600 text-xs">• Administración Central</span>
            </div>

            <!-- Last Access -->
            <p class="text-slate-500 text-xs mt-3">Último acceso: 29/01/2025</p>
          </div>
        </div>

        <!-- Status and Actions -->
        <div class="flex flex-col items-end gap-3 ml-4">
          <span class="px-3 py-1 bg-[#D8F3DC] text-[#2D6A4F] text-xs rounded-full font-medium border border-[#95D5B2]">
            Activo
          </span>

          <div class="flex items-center gap-2">
            <button onclick="abrirModalEditar('María García Pérez', 'maria.garcia@universidad.edu', 'Administrador')"
              class="text-[#40916C] hover:text-[#2D6A4F] transition-colors p-1">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z">
                </path>
              </svg>
            </button>
            <button class="text-[#DC2626] hover:text-[#B91C1C] transition-colors p-1">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">
                </path>
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- User Card 2 - Carlos Ruiz Sánchez -->
    <div class="bg-white rounded-xl p-6 shadow-md border border-slate-200 hover:shadow-lg transition-shadow">
      <div class="flex items-start justify-between">
        <div class="flex items-start gap-4 flex-1">
          <!-- Avatar -->
          <div
            class="bg-[#40916C] text-white w-14 h-14 rounded-full flex items-center justify-center text-lg font-bold flex-shrink-0">
            CR
          </div>

          <!-- User Info -->
          <div class="flex-1 min-w-0">
            <h3 class="font-semibold text-[#1B4332] text-lg">Carlos Ruiz Sánchez</h3>
            <p class="text-slate-600 text-sm truncate">carlos.ruiz@universidad.edu</p>

            <!-- Role and Department -->
            <div class="flex items-center gap-2 mt-2 flex-wrap">
              <span
                class="inline-flex items-center gap-1 px-3 py-1 bg-[#52B788] text-white text-xs rounded-full font-medium">
                <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                  <path
                    d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z">
                  </path>
                </svg>
                Coordinador
              </span>
              <span class="text-slate-600 text-xs">• Facultad de Ingeniería</span>
            </div>

            <!-- Last Access -->
            <p class="text-slate-500 text-xs mt-3">Último acceso: 19/01/2025</p>
          </div>
        </div>

        <!-- Status and Actions -->
        <div class="flex flex-col items-end gap-3 ml-4">
          <span class="px-3 py-1 bg-[#D8F3DC] text-[#2D6A4F] text-xs rounded-full font-medium border border-[#95D5B2]">
            Activo
          </span>

          <div class="flex items-center gap-2">
            <button onclick="abrirModalEditar('Carlos Ruiz Sánchez', 'carlos.ruiz@universidad.edu', 'Coordinador')"
              class="text-[#40916C] hover:text-[#2D6A4F] transition-colors p-1">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z">
                </path>
              </svg>
            </button>
            <button class="text-[#DC2626] hover:text-[#B91C1C] transition-colors p-1">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">
                </path>
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- User Card 3 - Ana López Torres -->
    <div class="bg-white rounded-xl p-6 shadow-md border border-slate-200 hover:shadow-lg transition-shadow">
      <div class="flex items-start justify-between">
        <div class="flex items-start gap-4 flex-1">
          <!-- Avatar -->
          <div
            class="bg-[#2D6A4F] text-white w-14 h-14 rounded-full flex items-center justify-center text-lg font-bold flex-shrink-0">
            AL
          </div>

          <!-- User Info -->
          <div class="flex-1 min-w-0">
            <h3 class="font-semibold text-[#1B4332] text-lg">Ana López Torres</h3>
            <p class="text-slate-600 text-sm truncate">ana.lopez@universidad.edu</p>

            <!-- Role and Department -->
            <div class="flex items-center gap-2 mt-2 flex-wrap">
              <span
                class="inline-flex items-center gap-1 px-3 py-1 bg-[#52B788] text-white text-xs rounded-full font-medium">
                <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                  <path
                    d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z">
                  </path>
                </svg>
                Coordinador
              </span>
              <span class="text-slate-600 text-xs">• Facultad de Medicina</span>
            </div>

            <!-- Last Access -->
            <p class="text-slate-500 text-xs mt-3">Último acceso: 18/01/2025</p>
          </div>
        </div>

        <!-- Status and Actions -->
        <div class="flex flex-col items-end gap-3 ml-4">
          <span class="px-3 py-1 bg-[#D8F3DC] text-[#2D6A4F] text-xs rounded-full font-medium border border-[#95D5B2]">
            Activo
          </span>

          <div class="flex items-center gap-2">
            <button onclick="abrirModalEditar('Ana López Torres', 'ana.lopez@universidad.edu', 'Coordinador')"
              class="text-[#40916C] hover:text-[#2D6A4F] transition-colors p-1">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z">
                </path>
              </svg>
            </button>
            <button class="text-[#DC2626] hover:text-[#B91C1C] transition-colors p-1">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">
                </path>
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- User Card 4 - Pedro Martínez Luna -->
    <div class="bg-white rounded-xl p-6 shadow-md border border-slate-200 hover:shadow-lg transition-shadow">
      <div class="flex items-start justify-between">
        <div class="flex items-start gap-4 flex-1">
          <!-- Avatar -->
          <div
            class="bg-[#74C69D] text-white w-14 h-14 rounded-full flex items-center justify-center text-lg font-bold flex-shrink-0">
            PM
          </div>

          <!-- User Info -->
          <div class="flex-1 min-w-0">
            <h3 class="font-semibold text-[#1B4332] text-lg">Pedro Martínez Luna</h3>
            <p class="text-slate-600 text-sm truncate">pedro.martinez@universidad.edu</p>

            <!-- Role and Department -->
            <div class="flex items-center gap-2 mt-2 flex-wrap">
              <span
                class="inline-flex items-center gap-1 px-3 py-1 bg-[#95D5B2] text-[#1B4332] text-xs rounded-full font-medium">
                <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                  <path
                    d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z">
                  </path>
                </svg>
                Consultor
              </span>
              <span class="text-slate-600 text-xs">• Biblioteca Central</span>
            </div>

            <!-- Last Access -->
            <p class="text-slate-500 text-xs mt-3">Último acceso: 15/01/2025</p>
          </div>
        </div>

        <!-- Status and Actions -->
        <div class="flex flex-col items-end gap-3 ml-4">
          <span class="px-3 py-1 bg-[#D8F3DC] text-[#2D6A4F] text-xs rounded-full font-medium border border-[#95D5B2]">
            Activo
          </span>

          <div class="flex items-center gap-2">
            <button onclick="abrirModalEditar('Pedro Martínez Luna', 'pedro.martinez@universidad.edu', 'Consultor')"
              class="text-[#40916C] hover:text-[#2D6A4F] transition-colors p-1">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z">
                </path>
              </svg>
            </button>
            <button class="text-[#DC2626] hover:text-[#B91C1C] transition-colors p-1">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">
                </path>
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Crear Nuevo Usuario -->
  <div id="modalNuevoUsuario"
    class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md transform transition-all">
      <!-- Modal Header -->
      <div class="flex items-start justify-between p-6 border-b border-slate-200">
        <div>
          <h2 class="text-xl font-bold text-[#2D6A4F]">Crear Nuevo Usuario</h2>
          <p class="text-sm text-slate-500 mt-1">Complete la información del nuevo usuario del sistema</p>
        </div>
        <button onclick="document.getElementById('modalNuevoUsuario').classList.add('hidden')"
          class="text-slate-400 hover:text-slate-600 transition-colors">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>

      <!-- Modal Body -->
      <div class="p-6 space-y-5">
        <!-- Nombre Completo -->
        <div>
          <label class="block text-sm font-medium text-[#2D6A4F] mb-2">Nombre Completo</label>
          <input type="text" placeholder="Nombre y apellidos"
            class="w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#52B788] focus:border-transparent outline-none transition-all text-slate-700 placeholder:text-slate-400">
        </div>

        <!-- Correo Electrónico -->
        <div>
          <label class="block text-sm font-medium text-[#2D6A4F] mb-2">Correo Electrónico</label>
          <input type="email" placeholder="usuario@universidad.edu"
            class="w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#52B788] focus:border-transparent outline-none transition-all text-slate-700 placeholder:text-slate-400">
        </div>

        <!-- Rol -->
        <div>
          <label class="block text-sm font-medium text-[#2D6A4F] mb-2">Rol</label>
          <select
            class="w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#52B788] focus:border-transparent outline-none transition-all text-slate-700 bg-white">
            <option value="" disabled selected>Seleccione rol</option>
            <option value="Administrador">Administrador</option>
            <option value="Financiera">Financiera</option>
          </select>
        </div>

      </div>

      <!-- Modal Footer -->
      <div class="flex items-center justify-end gap-3 p-6 border-t border-slate-200">
        <button onclick="document.getElementById('modalNuevoUsuario').classList.add('hidden')"
          class="px-5 py-2.5 text-slate-600 hover:text-slate-800 font-medium transition-colors">
          Cancelar
        </button>
        <button
          onclick="alert('Usuario creado (funcionalidad pendiente)'); document.getElementById('modalNuevoUsuario').classList.add('hidden')"
          class="px-5 py-2.5 bg-[#40916C] text-white rounded-lg hover:bg-[#2D6A4F] transition-colors shadow-sm font-medium">
          Crear Usuario
        </button>
      </div>
    </div>
  </div>

  <!-- Modal Editar Usuario -->
  <div id="modalEditarUsuario"
    class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md transform transition-all">
      <!-- Modal Header -->
      <div class="flex items-start justify-between p-6 border-b border-slate-200">
        <div>
          <h2 class="text-xl font-bold text-[#2D6A4F]">Editar Usuario</h2>
          <p class="text-sm text-slate-500 mt-1">Modifique la información del usuario</p>
        </div>
        <button onclick="document.getElementById('modalEditarUsuario').classList.add('hidden')"
          class="text-slate-400 hover:text-slate-600 transition-colors">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>

      <!-- Modal Body -->
      <div class="p-6 space-y-5">
        <!-- Nombre Completo -->
        <div>
          <label class="block text-sm font-medium text-[#2D6A4F] mb-2">Nombre Completo</label>
          <input type="text" id="editNombreCompleto" placeholder="Nombre y apellidos"
            class="w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#52B788] focus:border-transparent outline-none transition-all text-slate-700 placeholder:text-slate-400">
        </div>

        <!-- Correo Electrónico -->
        <div>
          <label class="block text-sm font-medium text-[#2D6A4F] mb-2">Correo Electrónico</label>
          <input type="email" id="editCorreoElectronico" placeholder="usuario@universidad.edu"
            class="w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#52B788] focus:border-transparent outline-none transition-all text-slate-700 placeholder:text-slate-400">
        </div>

        <!-- Rol -->
        <div>
          <label class="block text-sm font-medium text-[#2D6A4F] mb-2">Rol</label>
          <select id="editRol"
            class="w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#52B788] focus:border-transparent outline-none transition-all text-slate-700 bg-white">
            <option value="" disabled>Seleccione rol</option>
            <option value="Administrador">Administrador</option>
            <option value="Coordinador">Coordinador</option>
            <option value="Consultor">Consultor</option>
            <option value="Financiera">Financiera</option>
          </select>
        </div>

      </div>

      <!-- Modal Footer -->
      <div class="flex items-center justify-end gap-3 p-6 border-t border-slate-200">
        <button onclick="document.getElementById('modalEditarUsuario').classList.add('hidden')"
          class="px-5 py-2.5 text-slate-600 hover:text-slate-800 font-medium transition-colors">
          Cancelar
        </button>
        <button
          onclick="alert('Usuario editado (funcionalidad pendiente)'); document.getElementById('modalEditarUsuario').classList.add('hidden')"
          class="px-5 py-2.5 bg-[#40916C] text-white rounded-lg hover:bg-[#2D6A4F] transition-colors shadow-sm font-medium">
          Guardar Edición
        </button>
      </div>
    </div>
  </div>

  <!-- Script para abrir modal de edición -->
  <script>
    // Hacer la función global para que funcione con onclick
    window.abrirModalEditar = function (nombre, correo, rol) {
      // Rellenar los campos del formulario con los datos del usuario
      document.getElementById('editNombreCompleto').value = nombre;
      document.getElementById('editCorreoElectronico').value = correo;
      document.getElementById('editRol').value = rol;

      // Mostrar el modal
      document.getElementById('modalEditarUsuario').classList.remove('hidden');
    };

    // Ejecutar cuando el DOM esté listo
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', function () {
        console.log('Modal de edición listo');
      });
    }
  </script>
>>>>>>> 1242502a066689f026b6d02eb041ef0bf0e01a1b
</div>